import java.util.ArrayList;


public class Equation {

	NonTerminal start;
	int numberOfNonTerminals = 1;
	ArrayList<Symbol> elements;
	
	public Equation(ArrayList<Symbol> elements, int numberOfNonTerminals) {
		this.numberOfNonTerminals = numberOfNonTerminals;
		if(elements == null) {
			this.elements = new ArrayList<Symbol>();
			this.elements.add(new NonTerminal("E"));
			numberOfNonTerminals++;
		} else {
			this.elements = elements;
		}
	}
	
	public boolean containsNonTerminal() {
		if(numberOfNonTerminals == 0)
			return false;
		else 
			return true;
	}
	
	public ArrayList<Symbol> getElements() {
		return elements;
	}
	
	public ArrayList<Equation> Expand() {
		ArrayList<Equation> expansion = new ArrayList<>();
		
		
		for(int i = 0; i < elements.size(); i++) {
			if(elements.get(0).isNonTerminal()) {
				for(ArrayList<Symbol> uitbreiding : Expansions.getExpansions(((NonTerminal) elements.get(i)).getValue())) {
					ArrayList<Symbol> newElements = new ArrayList<>();
					int nonTerminalCount = 0;
					
					for(int j = 0; j < i; j++) {
						newElements.add(elements.get(j));
						if(elements.get(j).isNonTerminal()) {
							nonTerminalCount++;
						}
					}
					for(Symbol s : uitbreiding) {
						newElements.add(s);
						if(s.isNonTerminal()) {
							nonTerminalCount++;
						}
					}
					for(int j = i + 1; j < elements.size(); j++) {
						newElements.add(elements.get(j));
						if(elements.get(j).isNonTerminal()) {
							nonTerminalCount++;
						}
					}
					expansion.add(new Equation(newElements, nonTerminalCount));
				}
				// vervanging gebeurt mag uit bovenste lus
				i = elements.size();
			}
		}
		return expansion;
	}
}
